# API Relay Server MVP for Cursor

## ğŸ¯ ëª©ì 
Cursor IDEì—ì„œ ì‚¬ìš©í•˜ëŠ” LLM API í˜¸ì¶œì„ ì¤‘ê³„í•˜ì—¬ ì‚¬ìš©ëŸ‰ ì¶”ì  ë° í†µê³„ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ì„œë²„

## ğŸš€ Quick Start

### 1. í™˜ê²½ ì„¤ì •
```bash
# .env íŒŒì¼ ìˆ˜ì •
OPENAI_API_KEY=your-actual-openai-api-key
```

### 2. ì„œë²„ ì‹œì‘
```bash
# ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build
npm start
```

### 3. Cursor ì„¤ì •

Cursor IDEì—ì„œ:
1. Settings ì—´ê¸° (Cmd+, or Ctrl+,)
2. "OpenAI" ê²€ìƒ‰
3. ë‹¤ìŒ ì„¤ì • ì…ë ¥:
   - **Base URL**: `http://localhost:4000/v1`
   - **API Key**: `lc_dev_team1_cursor_x8k9j2h4`

## ğŸ“Š ê¸°ëŠ¥

### âœ… êµ¬í˜„ëœ ê¸°ëŠ¥
- âœ… OpenAI í˜¸í™˜ API í”„ë¡ì‹œ
- âœ… SSE ìŠ¤íŠ¸ë¦¬ë° ì§€ì› (Cursor ìë™ì™„ì„±/ì±„íŒ…)
- âœ… API í‚¤ ì¸ì¦
- âœ… ì‚¬ìš©ëŸ‰ ì¶”ì  (ìš”ì²­, í† í°, ë¹„ìš©)
- âœ… ì‹¤ì‹œê°„ ë¡œê¹…
- âœ… ëª¨ë¸ í•„í„°ë§

### ğŸ”„ ì¶”ê°€ ì˜ˆì •
- â³ MongoDB ì—°ë™
- â³ Redis ìºì‹±
- â³ Admin Dashboard í†µí•©
- â³ Anthropic Claude ì§€ì›
- â³ ê³ ê¸‰ Rate Limiting

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./test-relay.sh

# ìˆ˜ë™ í…ŒìŠ¤íŠ¸
curl http://localhost:4000/health
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
api-relay-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.ts           # ë©”ì¸ ì„œë²„
â”‚   â”œâ”€â”€ handlers/           # API í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ chatCompletions.ts  # ì±„íŒ…/ì™„ì„± í”„ë¡ì‹œ
â”‚   â”‚   â””â”€â”€ models.ts           # ëª¨ë¸ ëª©ë¡
â”‚   â””â”€â”€ middleware/         # ë¯¸ë“¤ì›¨ì–´
â”‚       â”œâ”€â”€ auth.ts         # API í‚¤ ì¸ì¦
â”‚       â”œâ”€â”€ usage.ts        # ì‚¬ìš©ëŸ‰ ì¶”ì 
â”‚       â””â”€â”€ error.ts        # ì—ëŸ¬ ì²˜ë¦¬
â”œâ”€â”€ .env                    # í™˜ê²½ ë³€ìˆ˜
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

## ğŸ“ˆ ì‚¬ìš©ëŸ‰ í†µê³„

ì„œë²„ëŠ” 10ê°œ ìš”ì²­ë§ˆë‹¤ ìë™ìœ¼ë¡œ í†µê³„ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    USAGE STATISTICS                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Total Requests: 10                                   â•‘
â•‘  Total Tokens:   1523                                 â•‘
â•‘  Total Cost:     $0.0234                              â•‘
â•‘  Avg Latency:    234ms                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ” API í‚¤ í˜•ì‹

```
lc_[í™˜ê²½]_[íŒ€]_[ì‚¬ìš©ì]_[ëœë¤]
ì˜ˆ: lc_dev_team1_cursor_x8k9j2h4
```

## âš¡ ì„±ëŠ¥

- **ë ˆì´í„´ì‹œ**: < 50ms ì¶”ê°€ (ë¡œì»¬)
- **ìŠ¤íŠ¸ë¦¬ë°**: ì‹¤ì‹œê°„ SSE ì§€ì›
- **ë™ì‹œ ìš”ì²­**: 100+ ì§€ì›

## ğŸ› ë¬¸ì œ í•´ê²°

### Cursorì—ì„œ ì—°ê²° ì•ˆ ë¨
1. ì„œë²„ ì‹¤í–‰ í™•ì¸: `curl http://localhost:4000/health`
2. Base URL ëì— `/v1` í¬í•¨ í™•ì¸
3. API í‚¤ê°€ `.env`ì˜ `RELAY_API_KEYS`ì— í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

### ìŠ¤íŠ¸ë¦¬ë°ì´ ì‘ë™í•˜ì§€ ì•ŠìŒ
1. OpenAI API í‚¤ê°€ ìœ íš¨í•œì§€ í™•ì¸
2. ì½˜ì†”ì—ì„œ `[STREAM]` ë¡œê·¸ í™•ì¸

## ğŸ“ ë¡œê·¸ ì˜ˆì‹œ

```
[AUTH] Valid request from: team=team1, user=cursor
[RELAY] Chat completion request: { model: 'gpt-3.5-turbo', messages: 2, stream: true }
[STREAM] Completed. Total chunks sent.
[USAGE] team1/cursor - /v1/chat/completions - gpt-3.5-turbo - Tokens: 156 - Latency: 1234ms
```

## ğŸš¦ ë‹¤ìŒ ë‹¨ê³„

1. **MongoDB ì—°ë™**: ì˜êµ¬ ì‚¬ìš©ëŸ‰ ì €ì¥
2. **Admin Dashboard**: í†µê³„ ì‹œê°í™”
3. **ìºì‹±**: ìë™ì™„ì„± ì‘ë‹µ ìºì‹±
4. **ë©€í‹° í”„ë¡œë°”ì´ë”**: Claude, Gemini ì¶”ê°€

## ğŸ“„ ë¼ì´ì„¼ìŠ¤

ISC